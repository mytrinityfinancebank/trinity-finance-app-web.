<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trinity Finance Bank Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom Styles for Aesthetics and Responsiveness */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f7fafc; visibility: hidden; } /* HIDE BODY UNTIL JS LOADS */
        .card { background-color: white; border-radius: 12px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1); }
        .gradient-card { 
            background: linear-gradient(135deg, #1f2937 0%, #4b5563 100%);
            color: white;
            position: relative;
            overflow: hidden;
        }
        .gradient-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: rgba(255, 255, 255, 0.05);
            transform: rotate(45deg);
        }
        .btn-primary { background-color: #2563eb; color: white; transition: background-color 0.2s; }
        .btn-primary:hover:not(:disabled) { background-color: #1d4ed8; }
        .btn-success { background-color: #059669; color: white; transition: background-color 0.2s; }
        .btn-success:hover:not(:disabled) { background-color: #047857; }
        .btn-danger { background-color: #dc2626; color: white; transition: background-color 0.2s; }
        .btn-danger:hover:not(:disabled) { background-color: #b91c1c; }
        
        button:disabled { cursor: not-allowed; opacity: 0.6; }
        .nav-link { 
            cursor: pointer;
            padding: 0.5rem 0.25rem;
            margin: 0 0.5rem;
            transition: all 0.15s ease-in-out;
        }
        .nav-link:hover {
            color: #2563eb;
        }

        /* Hide number input spinners */
        input[type="number"]::-webkit-outer-spin-button,
        input[type="number"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type="number"] {
            -moz-appearance: textfield;
        }

        /* --- New Modal Styles --- */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 60; /* Higher than message box z-50 */
        }
        .modal-content {
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 400px;
            padding: 1.5rem;
        }
    </style>
</head>
<body class="p-4 sm:p-8">

    <script>
        // --- APP STATE AND CONSTANTS ---
        const ACCOUNT_HOLDER_NAME = "Steven Arney"; 
        const CALCULATED_FINAL_BALANCE = 71800000.00; // Hardcoded final balance
        const SIMULATED_OTP = "123456";
        
        let initialHistory = [];
        let currentBalance = 0.00; // Will be set on login
        let transactionHistory = [];
        let pendingTransfer = null; 
        let userId = null; 

        // --- HTML Element References ---
        const bodyEl = document.querySelector('body');
        const balanceEl = document.getElementById('balance');
        const dashboardHistoryBody = document.getElementById('dashboard-history-body');
        const fullHistoryTableBody = document.getElementById('full-history-table-body');
        const totalTransactionsEl = document.getElementById('total-transactions');
        const messageBox = document.getElementById('message-box');
        const messageText = document.getElementById('message-text');
        const loginContainer = document.getElementById('login-container');
        const mainContent = document.getElementById('main-content');
        const accountUserIdEl = document.getElementById('account-user-id');
        const accountHolderEl = document.getElementById('account-holder-name');
        const otpModal = document.getElementById('otp-modal');
        const otpInput = document.getElementById('otp-input');
        
        // Action buttons
        const transferSubmitBtn = document.getElementById('transfer-submit-btn');
        const loginSubmitBtn = document.getElementById('login-submit-btn');

        // --- Utility Functions ---

        function setActionButtonsDisabled(disabled) {
            transferSubmitBtn && (transferSubmitBtn.disabled = disabled);
        }

        function showMessage(msg, type = 'success') {
            messageText.textContent = msg;
            messageBox.className = `fixed top-4 right-4 p-4 rounded-lg z-50 transition-transform transform ${type === 'success' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'} shadow-lg translate-x-0`;
            setTimeout(() => {
                messageBox.className = `fixed top-4 right-4 p-4 rounded-lg z-50 transition-transform transform translate-x-full`;
            }, 3000);
        }

        const formatCurrency = (amount) => {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 2,
            }).format(amount);
        };

        const generateRefId = (type) => {
            const prefix = type === 'Debit' ? 'TRXD' : 'TRXC';
            return prefix + Math.random().toString(16).substring(2, 10).toUpperCase();
        };

        // --- Navigation Logic (SPA) ---

        window.navigateTo = function(pageId) {
            // Hide all pages
            document.querySelectorAll('.app-page').forEach(page => page.classList.add('hidden'));
            // Show the requested page
            document.getElementById(pageId).classList.remove('hidden');
            
            // Update navigation active state
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('text-blue-600', 'font-bold', 'border-b-2', 'border-blue-600');
                link.classList.add('text-gray-500');
            });
            const activeLink = document.getElementById(`nav-${pageId}`);
            if (activeLink) {
                activeLink.classList.add('text-blue-600', 'font-bold', 'border-b-2', 'border-blue-600');
                activeLink.classList.remove('text-gray-500');
            }
            
            // Render content for specific pages
            if (pageId === 'history-content') {
                renderFullHistory();
            }
        }

        // --- Core Application Logic ---

        function renderHistoryTable(tableBody, history, limit = null) {
            tableBody.innerHTML = '';
            
            // Sort history: Ensure it is sorted chronologically (oldest to newest)
            const sortedHistory = [...history].sort((a, b) => {
                const dateA = a.timestamp instanceof Date ? a.timestamp : new Date(a.timestamp);
                const dateB = b.timestamp instanceof Date ? b.timestamp : new Date(b.timestamp);
                return dateA.getTime() - dateB.getTime(); // Sort ascending (Last Month to Recent)
            });

            // If a limit is set, reverse the array to show the most recent transactions first, then slice.
            let transactionsToDisplay = sortedHistory;
            if (limit) {
                transactionsToDisplay = sortedHistory.slice().reverse().slice(0, limit);
            }
            
            // Render rows
            transactionsToDisplay.forEach((tx, index) => { 
                const row = tableBody.insertRow(-1); // Insert at end for both sorted/reversed lists
                row.className = index % 2 === 0 ? 'bg-gray-50' : 'bg-white';
                
                const dateObj = tx.timestamp instanceof Date ? tx.timestamp : new Date(tx.timestamp);
                const displayDate = dateObj.toLocaleDateString();

                let rowNumber;
                if (limit) {
                    // For dashboard (reversed/last 10), show index + 1
                    rowNumber = index + 1;
                } else {
                    // For full history (chronological), get the original index + 1
                    rowNumber = sortedHistory.indexOf(tx) + 1; 
                }

                const cellIndex = row.insertCell();
                cellIndex.textContent = rowNumber; 
                cellIndex.className = 'py-2 px-4 text-gray-500';

                const cellRef = row.insertCell();
                cellRef.textContent = tx.refId;
                cellRef.className = 'py-2 px-4 font-mono text-xs text-gray-700';

                const cellSource = row.insertCell();
                cellSource.textContent = tx.source || 'N/A';
                cellSource.className = 'py-2 px-4 text-gray-700 text-sm';

                const cellAmount = row.insertCell();
                cellAmount.textContent = formatCurrency(tx.amount);
                cellAmount.className = `py-2 px-4 font-semibold ${tx.type === 'Credit' ? 'text-green-600' : 'text-red-600'}`;

                const cellType = row.insertCell();
                cellType.textContent = tx.type;
                cellType.className = `py-2 px-4 font-medium ${tx.type === 'Credit' ? 'text-green-700' : 'text-red-700'}`;

                const cellDate = row.insertCell();
                cellDate.textContent = displayDate;
                cellDate.className = 'py-2 px-4 text-gray-500 text-sm';

                const cellBalance = row.insertCell();
                cellBalance.textContent = formatCurrency(tx.runningBalance);
                cellBalance.className = 'py-2 px-4 font-medium text-gray-800';
            });
        }
        
        function renderDashboard() {
            balanceEl.textContent = formatCurrency(currentBalance);
            accountHolderEl.textContent = ACCOUNT_HOLDER_NAME;
            totalTransactionsEl.textContent = transactionHistory.length;
            
            // Render only the last 10 transactions on the dashboard (most recent first)
            renderHistoryTable(dashboardHistoryBody, transactionHistory, 10);
        }

        function renderFullHistory() {
            if (fullHistoryTableBody) {
                // Render all transactions in chronological order (Last Month to Recent)
                renderHistoryTable(fullHistoryTableBody, transactionHistory, null);
            }
        }
        
        // --- SYNCHRONOUS SEEDING DATA FUNCTION ---
        function getSeededHistory() {
            let current_rb = 0.00;
            const history = [
                // 1. Initial Calculated Seed
                { refId: 'TRXCFUND0000', type: 'Credit', amount: 0.00, timestamp: new Date('2016-06-01'), runningBalance: current_rb += 0.00, source: 'Initial Account Funding' }, 
                // 2. Gold Linked Investment CREDIT $31,000,000.00
                { refId: 'TRXCGOLD31M', type: 'Credit', amount: 31000000.00, timestamp: new Date('2016-06-25'), runningBalance: current_rb += 31000000.00, source: 'Gold Linked Investment' }, 
                // 3. Aegis Wealth Planner Investment CREDIT $10,200,950.00
                { refId: 'TRXCAEGIS10M1', type: 'Credit', amount: 10200950.00, timestamp: new Date('2016-07-20'), runningBalance: current_rb += 10200950.00, source: 'Aegis Wealth Planner Investment' }, 
                // 4. Bank Charges DEBIT $950
                { refId: 'TRXD950A', type: 'Debit', amount: 950.00, timestamp: new Date('2016-08-05'), runningBalance: current_rb -= 950.00, source: 'Bank Charges' }, 
                // 5. Aegis Wealth Planner Investment CREDIT $10,200,950.00
                { refId: 'TRXCAEGIS10M2', type: 'Credit', amount: 10200950.00, timestamp: new Date('2016-08-20'), runningBalance: current_rb += 10200950.00, source: 'Aegis Wealth Planner Investment' }, 
                // 6. Bank Charges DEBIT $950
                { refId: 'TRXD950B', type: 'Debit', amount: 950.00, timestamp: new Date('2016-09-10'), runningBalance: current_rb -= 950.00, source: 'Bank Charges' }, 
                // 7. Aegis Wealth Planner Investment CREDIT $10,200,950.00
                { refId: 'TRXCAEGIS10M3', type: 'Credit', amount: 10200950.00, timestamp: new Date('2016-10-01'), runningBalance: current_rb += 10200950.00, source: 'Aegis Wealth Planner Investment' }, 
                // 8. Bank Charges DEBIT $950
                { refId: 'TRXD950C', type: 'Debit', amount: 950.00, timestamp: new Date('2016-10-20'), runningBalance: current_rb -= 950.00, source: 'Bank Charges' }, 
                // 9. Aegis Wealth Planner Investment CREDIT $10,200,950.00
                { refId: 'TRXCAEGIS10M4', type: 'Credit', amount: 10200950.00, timestamp: new Date('2016-11-05'), runningBalance: current_rb += 10200950.00, source: 'Aegis Wealth Planner Investment' }, 
                // 10. Bank Charges DEBIT $950
                { refId: 'TRXD950D', type: 'Debit', amount: 950.00, timestamp: new Date('2016-11-30'), runningBalance: current_rb -= 950.00, source: 'Bank Charges' },
            ];
            return history;
        }
        initialHistory = getSeededHistory();

        // --- UPDATED: LOGIN HANDLER (Synchronous) ---
        window.handleLogin = () => {
            const usernameInput = document.getElementById('login-username').value.trim();
            const passwordInput = document.getElementById('login-password').value.trim();
            
            // Define required credentials
            const REQUIRED_USER_ID = "stevenarny@987"; 
            const REQUIRED_PASSWORD = "Arney987"; 
            const PERSISTENT_USER_ID = "stevenarny987"; 
            
            // Validation
            if (usernameInput !== REQUIRED_USER_ID || passwordInput !== REQUIRED_PASSWORD) {
                showMessage("Invalid User ID or Password.", 'error');
                return;
            }

            loginSubmitBtn.disabled = true;

            // FIX: Synchronously set global variables to the expected state
            userId = PERSISTENT_USER_ID; 
            currentBalance = CALCULATED_FINAL_BALANCE;
            transactionHistory = initialHistory; 
            
            // Immediately render the dashboard
            renderDashboard(); 

            // Login successful: Hide login screen and show main content
            loginContainer.classList.add('hidden');
            mainContent.classList.remove('hidden');
            accountUserIdEl.textContent = PERSISTENT_USER_ID;
            window.navigateTo('dashboard-content');
            showMessage(`Welcome back, ${ACCOUNT_HOLDER_NAME}`, 'success');

            // Attach app event listeners
            document.getElementById('transfer-submit-btn').onclick = window.handleBankTransfer;
            document.getElementById('otp-submit-btn').onclick = window.handleOtpSubmission; 
            document.getElementById('otp-cancel-btn').onclick = window.hideOtpModal; 
            
            loginSubmitBtn.disabled = false;
        };


        // --- UPDATED: TRANSACTION HANDLER (Local State Management) ---
        function processTransaction(amount, type, source = 'User Action') {
            if (amount <= 0 || isNaN(amount)) {
                showMessage("Invalid amount.", 'error');
                return false;
            }

            setActionButtonsDisabled(true); 

            let newBalance = currentBalance;
            const refId = generateRefId(type);
            let success = false;

            try {
                if (type === 'Debit') {
                    if (newBalance < amount) {
                        throw new Error("Transaction failed: Insufficient funds (Overdraft prevented).");
                    }
                    newBalance -= amount;
                } else if (type === 'Credit') {
                    newBalance += amount;
                }
                
                // Update local state variables
                currentBalance = newBalance;
                
                const newTransaction = {
                    refId: refId,
                    type: type,
                    amount: amount,
                    timestamp: new Date(), 
                    runningBalance: newBalance,
                    source: source
                };
                
                // Add new transaction to history
                transactionHistory.push(newTransaction);
                
                // Re-render the UI
                renderDashboard();
                
                showMessage(`${type} of ${formatCurrency(amount)} successful. New Balance: ${formatCurrency(currentBalance)}`, 'success');
                success = true;

            } catch (error) {
                console.error("Transaction failed:", error);
                const msg = error.message || "An unknown error occurred.";
                showMessage(msg, 'error');
            } finally {
                setActionButtonsDisabled(false); 
            }
            
            return success;
        }

        // Function to show the OTP modal
        window.showOtpModal = () => {
            otpInput.value = '';
            otpModal.classList.remove('hidden');
        };

        // Function to hide the OTP modal
        window.hideOtpModal = () => {
            otpModal.classList.add('hidden');
            pendingTransfer = null; // Clear pending data if user cancels/closes
        };
        
        // New function to handle the OTP submission
        window.handleOtpSubmission = () => {
            const enteredOtp = otpInput.value.trim();
            
            // Require a 6-digit numeric OTP
            if (!/^\d{6}$/.test(enteredOtp)) {
                showMessage("Please enter a valid 6-digit OTP.", 'error');
                otpInput.value = '';
                return;
            }

            if (!pendingTransfer) {
                showMessage("Security error: No pending transfer data.", 'error');
                window.hideOtpModal();
                return;
            }

            // Compare against the simulated OTP constant (local testing only)
            if (enteredOtp !== SIMULATED_OTP) {
                showMessage("Invalid OTP. Please try again.", 'error');
                otpInput.value = '';
                return;
            }

            // OTP is correct, proceed with the transaction
            window.hideOtpModal(); // Hide modal immediately

            const { amount, source } = pendingTransfer;
            
            // A bank transfer is a DEBIT from the user's account
            const debitSuccess = processTransaction(amount, 'Debit', source); 
            
            if (debitSuccess) {
                // Clear form and navigate back to the dashboard upon success
                document.getElementById('transfer-bank-name').value = '';
                document.getElementById('transfer-account-number').value = '';
                document.getElementById('transfer-amount').value = '';
                window.navigateTo('dashboard-content');
            }
            
            // Clear pending transfer data regardless of the final success status of processTransaction
            pendingTransfer = null;
        };


        window.handleBankTransfer = () => {
            const recipientBank = document.getElementById('transfer-bank-name').value.trim();
            const accountNumber = document.getElementById('transfer-account-number').value.trim();
            const amountInput = document.getElementById('transfer-amount').value;
            const amount = parseFloat(amountInput);
            
            if (!userId) {
                showMessage("Authentication required.", 'error');
                return;
            }
            if (!recipientBank || accountNumber.length < 8) {
                showMessage("Please enter valid recipient bank and account details.", 'error');
                return;
            }
            if (amount <= 0 || isNaN(amount)) {
                showMessage("Invalid transfer amount.", 'error');
                return;
            }
            if (currentBalance < amount) {
                showMessage("Insufficient funds for transfer.", 'error');
                return;
            }
            
            // Step 1: Store transfer details and require OTP
            const source = `Bank Transfer to ${recipientBank} - Acct: ${accountNumber.substring(accountNumber.length - 4)}`;
            pendingTransfer = { amount, source };

            // Show OTP modal for confirmation
            window.showOtpModal();
        };


        // --- Initialization ---
        function initApp() {
            
            // Show the body content now that the script has initialized
            bodyEl.style.visibility = 'visible'; 
            
            // Keep the login container visible and wait for user interaction
            loginContainer.classList.remove('hidden');
            mainContent.classList.add('hidden');
            
            // Attach login event listener
            loginSubmitBtn.onclick = window.handleLogin;
        }

        window.onload = initApp;

    </script>

    <div id="message-box" class="fixed top-4 right-4 p-4 rounded-lg z-50 transition-transform transform translate-x-full">
        <p id="message-text" class="font-semibold"></p>
    </div>

    <div id="login-container" class="flex flex-col items-center justify-center min-h-screen relative">
        <div class="card p-8 w-full max-w-sm text-center">
            <h1 class="text-3xl font-bold text-gray-800 mb-2">Trinity Finance Bank</h1>
            <p class="text-sm text-gray-500 mb-6">Secure Account Login</p>
            
            <div class="space-y-4 mb-6">
                <div>
                    <input type="text" id="login-username" placeholder="User ID" required 
                           class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <div>
                    <input type="password" id="login-password" placeholder="Password" required 
                           class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
            </div>
            
            <button id="login-submit-btn" class="w-full btn-primary font-bold py-3 rounded-lg">
                Sign In
            </button>
        </div>
    </div>


    <div id="main-content" class="hidden">
        <header class="mb-10 card p-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <h1 class="text-3xl font-bold text-gray-800 mb-4 md:mb-0">Trinity Finance</h1>
                <nav class="flex space-x-2 md:space-x-4 text-lg">
                    <span id="nav-dashboard-content" class="nav-link text-blue-600 font-bold border-b-2 border-blue-600" onclick="navigateTo('dashboard-content')">Dashboard</span>
                    <span id="nav-transfer-content" class="nav-link" onclick="navigateTo('transfer-content')">Bank Transfer</span>
                    <span id="nav-history-content" class="nav-link" onclick="navigateTo('history-content')">History</span>
                </nav>
            </div>
        </header>

        <div id="dashboard-content" class="app-page">
            <p class="text-lg text-gray-600 mb-6">Overview</p>
            
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

                <div class="lg:col-span-1 space-y-6">
                    <div class="card p-6 bg-blue-600 text-white">
                        <p class="text-sm font-semibold opacity-80 mb-1">ACCOUNT BALANCE</p>
                        <h2 id="balance" class="text-4xl sm:text-5xl font-extrabold">$0.00</h2>
                    </div>

                    <div class="card p-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">Account Details</h3>
                        <div class="space-y-3 text-sm">
                            <p><span class="font-medium text-gray-500">Welcome:</span> <span id="account-holder-name" class="font-bold text-gray-900">Steven Arney</span></p>
                            <p><span class="font-medium text-gray-500">ACCOUNT TYPE:</span> <span class="font-semibold text-green-600">Fixed Deposit Account</span></p>
                            <p><span class="font-medium text-gray-500">ACCOUNT NUMBER:</span> <span class="font-mono text-gray-700">7739118821</span></p>
                            <p><span class="font-medium text-gray-500">TOTAL TRANSACTIONS:</span> <span id="total-transactions" class="font-bold text-gray-700">0</span></p>
                            <p><span class="font-medium text-gray-500">Your User ID (Persistent):</span> <span id="account-user-id" class="font-mono text-xs text-blue-500 break-all">---</span></p>
                        </div>
                    </div>
                </div>

                <div class="lg:col-span-2 space-y-6">

                    <div class="gradient-card p-6 h-52 flex flex-col justify-between shadow-2xl">
                        <div>
                            <div class="text-xs font-light tracking-widest opacity-80 mb-2">Trinity Finance Virtual Card</div>
                            <div class="text-3xl font-mono tracking-widest">4815 1623 4277 7179</div>
                        </div>
                        <div class="flex justify-between items-center text-sm font-semibold">
                            <div>
                                <p class="text-xs font-light opacity-80">CARDHOLDER</p>
                                <p class="tracking-wider">STEVEN ARNEY</p>
                            </div>
                            <div class="flex space-x-6">
                                <div>
                                    <p class="text-xs font-light opacity-80">VALID THRU</p>
                                    <p class="tracking-wider">12/28</p>
                                </div>
                                <div>
                                    <p class="text-xs font-light opacity-80">CVV</p>
                                    <p class="tracking-wider">823</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card p-6 flex justify-between items-center">
                        <h3 class="text-xl font-semibold text-gray-800">Need to transfer funds?</h3>
                        <button onclick="navigateTo('transfer-content')" class="btn-primary font-bold py-2 px-4 rounded-lg">
                            Go to Bank Transfer
                        </button>
                    </div>

                </div>
            </div>

            <div class="mt-8 card p-6">
                <h3 class="text-2xl font-semibold text-gray-800 mb-4">Recent Transactions (Last 10)</h3>
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-100">
                            <tr>
                                <th class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">#</th>
                                <th class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Reference</th>
                                <th class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Source/Detail</th>
                                <th class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Amount</th>
                                <th class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Type</th>
                                <th class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                <th class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Running Balance</th>
                            </tr>
                        </thead>
                        <tbody id="dashboard-history-body" class="bg-white divide-y divide-gray-200">
                            </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="transfer-content" class="app-page hidden">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">Initiate Bank Transfer</h2>

            <div class="card p-8 max-w-lg mx-auto space-y-6">
                <p class="text-gray-600">Please enter the details of the recipient's external bank account.</p>
                
                <div>
                    <label for="transfer-bank-name" class="block text-sm font-medium text-gray-700 mb-1">Recipient Bank Name</label>
                    <input type="text" id="transfer-bank-name" placeholder="e.g., Global Financial Trust" required class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>

                <div>
                    <label for="transfer-account-number" class="block text-sm font-medium text-gray-700 mb-1">Account Number (External)</label>
                    <input type="text" id="transfer-account-number" placeholder="1234567890" required class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                
                <div>
                    <label for="transfer-amount" class="block text-sm font-medium text-gray-700 mb-1">Transfer Amount</label>
                    <input type="number" id="transfer-amount" placeholder="Amount ($)" step="0.01" required class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                
                <button id="transfer-submit-btn" class="w-full btn-primary font-bold py-3 rounded-lg">
                    Confirm Transfer
                </button>
            </div>
        </div>

        <div id="history-content" class="app-page hidden">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">Full Transaction History</h2>
            <p class="text-gray-600 mb-4">Displaying all transactions chronologically: **June 2016 to November 2016**.</p>

            <div class="mt-4 card p-6">
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-100">
                            <tr>
                                <th class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">#</th>
                                <th class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Reference</th>
                                <th class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Source/Detail</th>
                                <th class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Amount</th>
                                <th class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Type</th>
                                <th class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                <th class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Running Balance</th>
                            </tr>
                        </thead>
                        <tbody id="full-history-table-body" class="bg-white divide-y divide-gray-200">
                            </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div id="otp-modal" class="modal-overlay hidden">
        <div class="modal-content text-center">
            <h3 class="text-xl font-bold text-gray-800 mb-4">Transfer Verification</h3>
            <p class="text-gray-600 mb-4">Please enter the 6-digit One-Time Password (OTP) to confirm your transfer.</p>
            <input 
                type="text" 
                id="otp-input" 
                placeholder="6-digit OTP" 
                maxlength="6"
                inputmode="numeric"
                pattern="[0-9]{6}"
                class="w-full p-4 text-center text-2xl font-mono tracking-widest border-2 border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-6"
            >
            
            <div class="flex space-x-3">
                <button id="otp-cancel-btn" class="w-1/2 bg-gray-300 text-gray-800 font-bold py-3 rounded-lg hover:bg-gray-400">
                    Cancel
                </button>
                <button id="otp-submit-btn" class="w-1/2 btn-primary font-bold py-3 rounded-lg">
                    Verify & Send
                </button>
            </div>
        </div>
    </div>
    
    <footer id="app-footer" class="text-center text-gray-500 mt-12 mb-4 p-4">
        <p class="text-sm font-semibold mb-1">Trinity Finance Bank</p>
        <p class="text-xs">Address: 499 Stratford Court, Raleigh NC 27615</p>
        <p class="text-xs">Customer Support: (504) 499-5059</p>
    </footer>

</body>
</html>
