<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trinity Finance Bank Dashboard</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom Styles for Aesthetics and Responsiveness */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f7fafc; }
        .card { background-color: white; border-radius: 12px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1); }
        .gradient-card { 
            background: linear-gradient(135deg, #1f2937 0%, #4b5563 100%);
            color: white;
            position: relative;
            overflow: hidden;
        }
        .gradient-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: rgba(255, 255, 255, 0.05);
            transform: rotate(45deg);
        }
        .btn-primary { background-color: #2563eb; color: white; transition: background-color 0.2s; }
        .btn-primary:hover:not(:disabled) { background-color: #1d4ed8; }
        .btn-success { background-color: #059669; color: white; transition: background-color 0.2s; }
        .btn-success:hover:not(:disabled) { background-color: #047857; }
        .btn-danger { background-color: #dc2626; color: white; transition: background-color 0.2s; }
        .btn-danger:hover:not(:disabled) { background-color: #b91c1c; }
        
        button:disabled { cursor: not-allowed; opacity: 0.6; }
        .nav-link { 
            cursor: pointer;
            padding: 0.5rem 0.25rem;
            margin: 0 0.5rem;
            transition: all 0.15s ease-in-out;
        }
        .nav-link:hover {
            color: #2563eb;
        }

        /* Hide number input spinners */
        input[type="number"]::-webkit-outer-spin-button,
        input[type="number"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type="number"] {
            -moz-appearance: textfield;
        }

        /* --- New Modal Styles --- */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 60; /* Higher than message box z-50 */
        }
        .modal-content {
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 400px;
            padding: 1.5rem;
        }
    </style>
</head>
<body class="p-4 sm:p-8">

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, onSnapshot, updateDoc, arrayUnion, runTransaction, setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // IMPORTANT: FIREBASE SECURITY RULES GUIDE (required for access)
        /*
        rules_version = '2';
        service cloud.firestore {
          match /databases/{database}/documents {
            match /artifacts/{appId}/users/{userId}/{document=**} {
              allow read, write: if request.auth != null && request.auth.uid == userId;
            }
          }
        }
        */

        // GLOBAL VARIABLES & CONFIGURATION
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {
            apiKey: "AIzaSyACOITBYfN3Y1G1-QTWgo_t1PutVlsLYKI",
            authDomain: "trinity-finance-app-6002.firebaseapp.com",
            projectId: "trinity-finance-app-6002",
            storageBucket: "trinity-finance-app-6002.firebasestorage.app",
            messagingSenderId: "545859635678",
            appId: "1:545859635678:web:6b13c3da6c61a23b23354f",
            measurementId: "G-NLWB0495RW"
        };
        const appId = typeof __app_id !== 'undefined' ? __app_id : firebaseConfig.projectId || 'default-app-id';
        
        // APP STATE AND CONSTANTS
        // Corrected account holder name
        const ACCOUNT_HOLDER_NAME = "STEVEN ARNEY";
        // Starting balance requested: 71,800,000.00
        const INITIAL_BALANCE = 71800000.00; 
        // Simulated OTP for local testing only. NOT displayed anywhere in the UI.
        // NOTE: This constant exists only to let local testing work; remove for production.
        const SIMULATED_OTP = "123456";
        
        let app;
        let db;
        let auth;
        let userId = null;
        let accountRef = null;
        let currentBalance = INITIAL_BALANCE;
        let transactionHistory = [];
        let pendingTransfer = null; // New state for pending transfer details
        
        // HTML Element References (get after DOM loads)
        const balanceEl = document.getElementById('balance');
        const dashboardHistoryBody = document.getElementById('dashboard-history-body');
        const fullHistoryTableBody = document.getElementById('full-history-table-body');
        const totalTransactionsEl = document.getElementById('total-transactions');
        const messageBox = document.getElementById('message-box');
        const messageText = document.getElementById('message-text');
        const loginContainer = document.getElementById('login-container');
        const mainContent = document.getElementById('main-content');
        const accountUserIdEl = document.getElementById('account-user-id');
        const accountHolderEl = document.getElementById('account-holder-name');
        const otpModal = document.getElementById('otp-modal');
        const otpInput = document.getElementById('otp-input');
        
        // Action buttons
        const depositBtn = document.getElementById('deposit-btn');
        const withdrawBtn = document.getElementById('withdraw-btn');
        const transferSubmitBtn = document.getElementById('transfer-submit-btn');

        // Utility Functions
        function setActionButtonsDisabled(disabled) {
            depositBtn && (depositBtn.disabled = disabled);
            withdrawBtn && (withdrawBtn.disabled = disabled);
            transferSubmitBtn && (transferSubmitBtn.disabled = disabled);
        }

        function showMessage(msg, type = 'success') {
            messageText.textContent = msg;
            messageBox.className = `fixed top-4 right-4 p-4 rounded-lg z-50 transition-transform transform ${type === 'success' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'} shadow-lg translate-x-0`;
            setTimeout(() => {
                messageBox.className = `fixed top-4 right-4 p-4 rounded-lg z-50 transition-transform transform translate-x-full`;
            }, 3000);
        }

        const formatCurrency = (amount) => {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 2,
            }).format(amount);
        };

        const generateRefId = (type) => {
            const prefix = type === 'Debit' ? 'TRXD' : 'TRXC';
            return prefix + Math.random().toString(16).substring(2, 10).toUpperCase();
        };

        // New helpers for routing/account masking & validation
        function maskLast4(value) {
            if (!value) return '';
            const s = String(value);
            if (s.length <= 4) return s;
            return '****' + s.slice(-4);
        }

        function validateRouting(value) {
            if (!value) return true; // optional
            const v = value.replace(/\s|-/g, '');
            if (/^\d{9}$/.test(v)) return true;           // US routing (ACH)
            if (/^\d{6}$/.test(v)) return true;           // UK sort code (digits only)
            if (/^[A-Z0-9]{8,11}$/i.test(v)) return true; // SWIFT/BIC (8 or 11)
            if (/^[A-Z0-9]{10,34}$/i.test(v)) return true; // IBAN (loose check)
            return false;
        }

        // Navigation Logic (SPA)
        window.navigateTo = function(pageId) {
            document.querySelectorAll('.app-page').forEach(page => page.classList.add('hidden'));
            document.getElementById(pageId).classList.remove('hidden');
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('text-blue-600', 'font-bold', 'border-b-2', 'border-blue-600');
                link.classList.add('text-gray-500');
            });
            const activeLink = document.getElementById(`nav-${pageId}`);
            if (activeLink) {
                activeLink.classList.add('text-blue-600', 'font-bold', 'border-b-2', 'border-blue-600');
                activeLink.classList.remove('text-gray-500');
            }
            if (pageId === 'history-content') renderFullHistory();
        }

        // Core Application Logic
        function renderHistoryTable(tableBody, history, limit = null) {
            tableBody.innerHTML = '';
            const sortedHistory = [...history].sort((a, b) => {
                const dateA = typeof a.timestamp.toDate === 'function' ? a.timestamp.toDate() : new Date(a.timestamp);
                const dateB = typeof b.timestamp.toDate === 'function' ? b.timestamp.toDate() : new Date(b.timestamp);
                return dateA - dateB;
            });

            let transactionsToDisplay = sortedHistory;
            if (limit) transactionsToDisplay = sortedHistory.slice().reverse().slice(0, limit);
            if (!limit) transactionsToDisplay.reverse();

            transactionsToDisplay.forEach((tx, index) => {
                const row = tableBody.insertRow(0);
                row.className = index % 2 === 0 ? 'bg-gray-50' : 'bg-white';
                let displayDate = 'N/A';
                if (tx.timestamp) {
                    const dateObj = typeof tx.timestamp.toDate === 'function' ? tx.timestamp.toDate() : new Date(tx.timestamp);
                    displayDate = dateObj.toLocaleDateString();
                }

                const cellIndex = row.insertCell();
                cellIndex.textContent = tx.index || '';
                cellIndex.className = 'py-2 px-4 text-gray-500';

                const cellRef = row.insertCell();
                cellRef.textContent = tx.refId;
                cellRef.className = 'py-2 px-4 font-mono text-xs text-gray-700';

                const cellSource = row.insertCell();
                cellSource.textContent = tx.source || 'N/A';
                cellSource.className = 'py-2 px-4 text-gray-700 text-sm';

                const cellAmount = row.insertCell();
                cellAmount.textContent = formatCurrency(tx.amount);
                cellAmount.className = `py-2 px-4 font-semibold ${tx.type === 'Credit' ? 'text-green-600' : 'text-red-600'}`;

                const cellType = row.insertCell();
                cellType.textContent = tx.type;
                cellType.className = `py-2 px-4 font-medium ${tx.type === 'Credit' ? 'text-green-700' : 'text-red-700'}`;

                const cellDate = row.insertCell();
                cellDate.textContent = displayDate;
                cellDate.className = 'py-2 px-4 text-gray-500 text-sm';

                const cellBalance = row.insertCell();
                cellBalance.textContent = formatCurrency(tx.runningBalance);
                cellBalance.className = 'py-2 px-4 font-medium text-gray-800';
            });

            if (!limit) {
                tableBody.innerHTML = '';
                sortedHistory.forEach((tx, index) => {
                    const row = tableBody.insertRow(-1);
                    row.className = index % 2 === 0 ? 'bg-gray-50' : 'bg-white';
                    let displayDate = 'N/A';
                    if (tx.timestamp) {
                        const dateObj = typeof tx.timestamp.toDate === 'function' ? tx.timestamp.toDate() : new Date(tx.timestamp);
                        displayDate = dateObj.toLocaleDateString();
                    }

                    const cellIndex = row.insertCell();
                    cellIndex.textContent = index + 1;
                    cellIndex.className = 'py-2 px-4 text-gray-500';

                    const cellRef = row.insertCell();
                    cellRef.textContent = tx.refId;
                    cellRef.className = 'py-2 px-4 font-mono text-xs text-gray-700';

                    const cellSource = row.insertCell();
                    cellSource.textContent = tx.source || 'N/A';
                    cellSource.className = 'py-2 px-4 text-gray-700 text-sm';

                    const cellAmount = row.insertCell();
                    cellAmount.textContent = formatCurrency(tx.amount);
                    cellAmount.className = `py-2 px-4 font-semibold ${tx.type === 'Credit' ? 'text-green-600' : 'text-red-600'}`;

                    const cellType = row.insertCell();
                    cellType.textContent = tx.type;
                    cellType.className = `py-2 px-4 font-medium ${tx.type === 'Credit' ? 'text-green-700' : 'text-red-700'}`;

                    const cellDate = row.insertCell();
                    cellDate.textContent = displayDate;
                    cellDate.className = 'py-2 px-4 text-gray-500 text-sm';

                    const cellBalance = row.insertCell();
                    cellBalance.textContent = formatCurrency(tx.runningBalance);
                    cellBalance.className = 'py-2 px-4 font-medium text-gray-800';
                });
            }
        }

        function renderDashboard() {
            balanceEl.textContent = formatCurrency(currentBalance);
            accountHolderEl.textContent = ACCOUNT_HOLDER_NAME;
            totalTransactionsEl.textContent = transactionHistory.length;
            renderHistoryTable(dashboardHistoryBody, transactionHistory, 10);
        }

        function renderFullHistory() {
            if (fullHistoryTableBody) renderHistoryTable(fullHistoryTableBody, transactionHistory, null);
        }

        async function initializeAccount() {
            accountRef = doc(db, 'artifacts', appId, 'users', userId, 'accountData', 'main');

            const daysAgo = (days) => new Date(Date.now() - days * 86400000);

            try {
                const docSnap = await getDoc(accountRef);

                if (!docSnap.exists()) {
                    const seededHistory = [
                        { refId: 'TRXD96E73C7', type: 'Debit', amount: 450.00, timestamp: daysAgo(29), runningBalance: 71799550.00, source: 'Online Payment - Utility' }, 
                        { refId: 'TRXCA9F71F16', type: 'Credit', amount: 1200.00, timestamp: daysAgo(25), runningBalance: 71800750.00, source: 'Salary Deposit' }, 
                        { refId: 'TRXD093AEE8D', type: 'Debit', amount: 250.00, timestamp: daysAgo(18), runningBalance: 71800500.00, source: 'Rent Payment' }, 
                        { refId: 'TRXC8FE0A45D', type: 'Credit', amount: 50.00, timestamp: daysAgo(15), runningBalance: 71800550.00, source: 'Refund - Online Store' }, 
                        { refId: 'TRXD749FFDD2', type: 'Debit', amount: 150.00, timestamp: daysAgo(10), runningBalance: 71800400.00, source: 'Grocery Store' }, 
                        { refId: 'TRXC9DE8249B', type: 'Credit', amount: 500.00, timestamp: daysAgo(5), runningBalance: 71800900.00, source: 'Investment Payout' }, 
                        { refId: 'TRXDAD68D66D', type: 'Debit', amount: 50.00, timestamp: daysAgo(3), runningBalance: 71800850.00, source: 'Coffee Shop' }, 
                        { refId: 'TRXCC5B2F62F', type: 'Credit', amount: 200.00, timestamp: daysAgo(1), runningBalance: 71801050.00, source: 'Freelance Income' }, 
                        { refId: 'TRXCC5B2162F', type: 'Credit', amount: -1050.00, timestamp: new Date(), runningBalance: 71800000.00, source: 'Initial Seed Adjustment' },
                    ];
                    const data = {
                        balance: INITIAL_BALANCE,
                        accountHolder: ACCOUNT_HOLDER_NAME,
                        history: seededHistory,
                        createdAt: new Date(),
                    };
                    await setDoc(accountRef, data);
                    showMessage("New account created and seeded with starting balance.", 'success');
                } else {
                    const data = docSnap.data();
                    if (data.accountHolder !== ACCOUNT_HOLDER_NAME) {
                        await updateDoc(accountRef, { accountHolder: ACCOUNT_HOLDER_NAME });
                    }
                }

                onSnapshot(accountRef, (doc) => {
                    if (doc.exists()) {
                        const data = doc.data();
                        currentBalance = data.balance;
                        transactionHistory = Array.isArray(data.history) ? data.history : [];
                        renderDashboard();
                        if (!document.getElementById('history-content').classList.contains('hidden')) renderFullHistory();
                    }
                }, (error) => {
                    console.error("Error listening to account data:", error);
                    showMessage("Error reading account data. Check console.", 'error');
                });

            } catch (error) {
                console.error("Error initializing account:", error);
                showMessage("Failed to connect to the database. Permissions issue likely.", 'error');
            }
        }

        async function processTransaction(amount, type, source = 'User Action') {
            if (amount <= 0 || isNaN(amount)) {
                showMessage("Invalid amount.", 'error');
                return false;
            }

            setActionButtonsDisabled(true); 

            let newBalance;
            const refId = generateRefId(type);

            try {
                const transactionResult = await runTransaction(db, async (transaction) => {
                    const docSnap = await transaction.get(accountRef);
                    if (!docSnap.exists()) {
                        throw "Account document does not exist!";
                    }

                    const data = docSnap.data();
                    let currentBalanceInTx = data.balance;
                    
                    if (type === 'Debit') {
                        if (currentBalanceInTx < amount) {
                            throw new Error("Insufficient funds (Overdraft prevented).");
                        }
                        newBalance = currentBalanceInTx - amount;
                    } else if (type === 'Credit') {
                        newBalance = currentBalanceInTx + amount;
                    }

                    const newTransaction = {
                        refId: refId,
                        type: type,
                        amount: amount,
                        timestamp: new Date(),
                        runningBalance: newBalance,
                        source: source
                    };

                    transaction.update(accountRef, {
                        balance: newBalance,
                        history: arrayUnion(newTransaction)
                    });
                    
                    return true;
                });
                
                showMessage(`${type} of ${formatCurrency(amount)} successful.`, 'success');
                return transactionResult; 

            } catch (error) {
                console.error("Transaction failed:", error);
                const msg = typeof error === 'string' ? error : (error.message || "Database error occurred.");
                if (msg.includes("Insufficient funds")) {
                    showMessage("Transaction failed: Insufficient funds (Overdraft prevented).", 'error');
                } else {
                    showMessage(msg, 'error');
                }
                return false;
            } finally {
                setActionButtonsDisabled(false); 
            }
        }

        // OTP modal show/hide
        window.showOtpModal = () => {
            otpInput.value = '';
            otpModal.classList.remove('hidden');
        };
        window.hideOtpModal = () => {
            otpModal.classList.add('hidden');
            pendingTransfer = null;
        };

        // handle OTP (client-side simulated check, value not shown in UI)
        window.handleOtpSubmission = async () => {
            const enteredOtp = otpInput.value.trim();

            // Require 6 digits
            if (!/^\d{6}$/.test(enteredOtp)) {
                showMessage("Please enter a valid 6-digit OTP.", 'error');
                otpInput.value = '';
                return;
            }

            if (!pendingTransfer) {
                showMessage("Security error: No pending transfer data.", 'error');
                window.hideOtpModal();
                return;
            }

            // Client-side compare only for local testing (value not rendered anywhere)
            if (enteredOtp !== SIMULATED_OTP) {
                showMessage("Invalid OTP. Please try again.", 'error');
                otpInput.value = '';
                return;
            }

            window.hideOtpModal();

            const { amount, source } = pendingTransfer;
            const debitSuccess = await processTransaction(amount, 'Debit', source);

            if (debitSuccess) {
                document.getElementById('transfer-bank-name').value = '';
                document.getElementById('transfer-account-number').value = '';
                document.getElementById('transfer-routing-number') && (document.getElementById('transfer-routing-number').value = '');
                document.getElementById('transfer-amount').value = '';
                window.navigateTo('dashboard-content');
            }

            pendingTransfer = null;
        };

        // handle bank transfer (reads routing, validates, masks)
        window.handleBankTransfer = async () => {
            const recipientBank = document.getElementById('transfer-bank-name').value.trim();
            const accountNumber = document.getElementById('transfer-account-number').value.trim();
            const routing = document.getElementById('transfer-routing-number') ? document.getElementById('transfer-routing-number').value.trim() : '';
            const amountInput = document.getElementById('transfer-amount').value;
            const amount = parseFloat(amountInput);

            if (!userId) { showMessage("Authentication required.", 'error'); return; }
            if (!recipientBank || accountNumber.length < 6) { showMessage("Please enter valid recipient bank and account details.", 'error'); return; }
            if (!validateRouting(routing)) { showMessage("Please enter a valid routing/sort/IBAN/SWIFT.", 'error'); return; }
            if (amount <= 0 || isNaN(amount)) { showMessage("Invalid transfer amount.", 'error'); return; }
            if (currentBalance < amount) { showMessage("Insufficient funds for transfer.", 'error'); return; }

            const acctMasked = accountNumber.length >= 4 ? maskLast4(accountNumber) : accountNumber;
            const routingMasked = routing ? (' RT: ' + maskLast4(routing)) : '';
            const source = `Bank Transfer to ${recipientBank} - ${acctMasked}${routingMasked}`;

            pendingTransfer = { amount, source, meta: { bankName: recipientBank, accountNumber: accountNumber, routing: routing } };

            window.showOtpModal();
        };

        window.handleDeposit = async () => {
            const amountInput = document.getElementById('transaction-amount').value;
            const amount = parseFloat(amountInput);
            const success = await processTransaction(amount, 'Credit', 'Deposit');
            if (success) document.getElementById('transaction-amount').value = '';
        };

        window.handleWithdraw = async () => {
            const amountInput = document.getElementById('transaction-amount').value;
            const amount = parseFloat(amountInput);
            const success = await processTransaction(amount, 'Debit', 'Withdrawal');
            if (success) document.getElementById('transaction-amount').value = '';
        };

        // Initialization
        async function initApp() {
            try {
                app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);
                setLogLevel('debug');

                if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                    await signInWithCustomToken(auth, __initial_auth_token);
                } else {
                    await signInAnonymously(auth);
                }

                userId = auth.currentUser.uid;
                accountUserIdEl.textContent = userId;

                loginContainer.classList.add('hidden');
                mainContent.classList.remove('hidden');

                await initializeAccount();

                document.getElementById('deposit-btn').onclick = window.handleDeposit;
                document.getElementById('withdraw-btn').onclick = window.handleWithdraw;
                document.getElementById('transfer-submit-btn').onclick = window.handleBankTransfer;
                document.getElementById('otp-submit-btn').onclick = window.handleOtpSubmission;
                document.getElementById('otp-cancel-btn').onclick = window.hideOtpModal;

                window.navigateTo('dashboard-content');

            } catch (error) {
                console.error("Firebase Initialization/Sign-In Error:", error);
                showMessage("Critical Error: Failed to initialize application data. Please check Firebase Auth and Security Rules.", 'error');
                loginContainer.classList.remove('hidden');
                mainContent.classList.add('hidden');
            }
        }

        window.onload = initApp;

    </script>

    <!-- Global Message Box -->
    <div id="message-box" class="fixed top-4 right-4 p-4 rounded-lg z-50 transition-transform transform translate-x-full">
        <p id="message-text" class="font-semibold"></p>
    </div>

    <!-- Login Screen (Waiting state before auth completes) -->
    <div id="login-container" class="flex items-center justify-center min-h-screen">
        <div class="card p-8 w-full max-w-sm text-center">
            <h1 class="text-3xl font-bold text-gray-800 mb-2">Trinity Finance Bank</h1>
            <p class="text-sm text-gray-500 mb-6">Attempting to connect to your secure account...</p>
            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"></div>
            <p class="text-xs text-gray-400 mt-4">Data is saved securely via Firestore.</p>
        </div>
    </div>

    <!-- Main Content Wrapper -->
    <div id="main-content" class="hidden">
        <header class="mb-10 card p-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <h1 class="text-3xl font-bold text-gray-800 mb-4 md:mb-0">Trinity Finance</h1>
                <nav class="flex space-x-2 md:space-x-4 text-lg">
                    <span id="nav-dashboard-content" class="nav-link text-blue-600 font-bold border-b-2 border-blue-600" onclick="navigateTo('dashboard-content')">Dashboard</span>
                    <span id="nav-transfer-content" class="nav-link" onclick="navigateTo('transfer-content')">Bank Transfer</span>
                    <span id="nav-history-content" class="nav-link" onclick="navigateTo('history-content')">History</span>
                </nav>
            </div>
        </header>

        <!-- DASHBOARD -->
        <div id="dashboard-content" class="app-page">
            <p class="text-lg text-gray-600 mb-6">Overview</p>
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <div class="lg:col-span-1 space-y-6">
                    <div class="card p-6 bg-blue-600 text-white">
                        <p class="text-sm font-semibold opacity-80 mb-1">ACCOUNT BALANCE</p>
                        <h2 id="balance" class="text-4xl sm:text-5xl font-extrabold">$0.00</h2>
                    </div>

                    <div class="card p-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">Account Details</h3>
                        <div class="space-y-3 text-sm">
                            <p><span class="font-medium text-gray-500">Welcome:</span> <span id="account-holder-name" class="font-bold text-gray-900">STEVEN ARNEY</span></p>
                            <p><span class="font-medium text-gray-500">ACCOUNT TYPE:</span> <span class="font-semibold text-green-600">Fixed Deposit Account</span></p>
                            <p><span class="font-medium text-gray-500">ACCOUNT NUMBER:</span> <span class="font-mono text-gray-700">7739118821</span></p>
                            <p><span class="font-medium text-gray-500">TOTAL TRANSACTIONS:</span> <span id="total-transactions" class="font-bold text-gray-700">0</span></p>
                            <p><span class="font-medium text-gray-500">Your User ID:</span> <span id="account-user-id" class="font-mono text
